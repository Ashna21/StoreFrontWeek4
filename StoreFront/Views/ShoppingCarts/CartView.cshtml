@model IEnumerable<StoreFront.Models.ShoppingCartProduct>
@{
    ViewBag.Title = "CartView";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

<script src="~/Scripts/jquery-3.0.0.min.js"
        type = "text/javascript"></script>
<script type="text/javascript">
    $(function () {

        $(".DeleteLink").click(function (data) {
            var itemToDelete = $(this).attr("data-id");
            if (itemToDelete != '') {

                $.post( "~/ShoppingCarts/Delete", { "id": itemToDelete },
                    function (data) {
                        if (data.Quantity == 0) {
                            $('#row-' + data.DeletedId).text(data.ItemCount).fadeOut('slow');
                        }
                        else {
                            $('#item-count-' + data.DeleteId).text(data.ItemCount);
                        }
                    });
            }
        });
    });
</script>

<h2>@Session["name"]'s Shopping Cart</h2>
<h2>@Session["EmptyCart"]</h2>

<div id="C">
<table class="table">
    <tr>
        <th> @Html.DisplayNameFor(model => model.ProductName)</th>
        <th> @Html.DisplayNameFor(model => model.Quantity)</th>
        <th> @Html.DisplayNameFor(model => model.Price)</th>
    </tr>
@foreach (var item in Model)
{
    <tr id="#row-@item.ProductID">
        <td> @Html.DisplayFor(modelItem => item.ProductName)</td>
        <td id="item-count"> @Html.EditorFor(modelItem => item.Quantity, new { htmlAttributes = new { @class = "form-control" } })</td>
        <td>$@Html.DisplayFor(modelItem => item.Price)</td>
        <td> <a href="#" class="DeleteLink" data-id="@item.ProductID">X</a></td>
        @*<td> @Html.ActionLink("x", "delete", "ShoppingCarts", new { productId = item.ProductID, cartId = item.ShoppingCartID }, null)</td>*@
    </tr>
   
        @*<td>
            @Html.ActionLink("Update Cart", "UpdateQuantity", "ShoppingCarts", new { productId = item.ProductID, cartId = item.ShoppingCartID, item.Quantity})
        </td>*@
  
}

</table>


<table class="table">
    <tr>
        <th>
            <p>Your Total Is :  @ViewBag.Price</p>
        </th>
    </tr>
</table>
</div>

